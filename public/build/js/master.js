"use strict";function chatMessageSend(){document.getElementById("message").addEventListener("submit",function(e){return e.preventDefault(),document.getElementById("m").value&&(app.socket.emit("chat:message:send",{text:document.getElementById("m").value,time:(new Date).getTime(),user:app.user}),document.getElementById("m").value=""),!1}),app.socket.on("chat:message:send",function(e){var t=document.getElementById("sent-messages");t.querySelector('.typing[data-user="'+e.user+'"]')&&t.querySelector('.typing[data-user="'+e.user+'"]').remove();var s=helpers.append("li",e.text,t);s.setAttribute("data-timestamp",e.time),s.setAttribute("data-user",e.user),app.isCurrentUser(e.user)&&s.classList.add("current-user"),t.scrollTop=t.scrollHeight})}function chatMessageTyping(){document.getElementById("m").addEventListener("input",function(e){return e.preventDefault(),e.target.value&&app.socket.emit("chat:message:typing",{time:(new Date).getTime(),user:app.user}),!1}),app.socket.on("chat:message:typing",function(e){var t=document.getElementById("sent-messages");if(!t.querySelector('.typing[data-user="'+e.user+'"]')){var s=helpers.append("li","",t);s.setAttribute("data-timestamp",e.time),s.setAttribute("data-user",e.user),s.classList.add("typing"),app.isCurrentUser(e.user)&&s.classList.add("current-user"),t.scrollTop=t.scrollHeight}})}function cardSelected(){document.querySelectorAll(".game .cards a").forEach(function(e){e.addEventListener("click",function(e){return e.preventDefault(),app.socket.emit("cards:selected",{text:e.target.textContent,time:(new Date).getTime(),user:app.user}),!1})}),app.socket.on("cards:selected",function(e){var t=helpers.append("li",e.text,document.getElementById("selected-cards"));t.setAttribute("data-timestamp",e.time),t.setAttribute("data-user",e.user),app.isCurrentUser(e.user)&&t.classList.add("current-user")})}var helpers={};helpers.append=function(e,t,s){var n=document.createElement(e);return n.appendChild(document.createTextNode(t)),s.appendChild(n)};var app={socket:io(),user:Math.random(),setupTime:(new Date).getTime(),isCurrentUser:function(e){return e+app.setupTime.toString()===app.user+app.setupTime.toString()}};document.getElementById("username-input").addEventListener("submit",function(e){return e.preventDefault(),document.getElementById("username").value&&(app.user=document.getElementById("username").value,document.querySelector(".intro-screen").classList.add("inactive"),setTimeout(function(){document.querySelector(".intro-screen").remove(),document.querySelector(".cah-screen").classList.remove("inactive"),setTimeout(function(){cardSelected(),chatMessageSend(),chatMessageTyping()})},310)),!1});
//# sourceMappingURL=master.js.map
